
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../dynamic-load/">
      
      
      
      <link rel="icon" href="../../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.4.11">
    
    
      
        <title>資源包 - mkdocs</title>
      
    
    
      <link rel="stylesheet" href="../../../../assets/stylesheets/main.fad675c6.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../../styles/atom-one-dark.min.css">
    
      <link rel="stylesheet" href="../../../../styles/styles.css">
    
    <script>__md_scope=new URL("../../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
   <link href="../../../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
    html.glightbox-open { overflow: initial; height: 100%; }
    .gslide-title { margin-top: 0px; user-select: text; }
    .gslide-desc { color: #666; user-select: text; }
    .gslide-image img { background: white; }
    .gscrollbar-fixer { padding-right: 15px; }
    .gdesc-inner { font-size: 0.75rem; }
    body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
    body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
    body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}</style> <script src="../../../../assets/javascripts/glightbox.min.js"></script></head>
  
  
    <body dir="ltr">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#bundle" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../../.." title="mkdocs" class="md-header__button md-logo" aria-label="mkdocs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            mkdocs
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              資源包
            
          </span>
        </div>
      </div>
    </div>
    
    
    
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../.." class="md-tabs__link">
          
  
  首頁

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../../" class="md-tabs__link">
          
  
  網頁遊戲引擎原理與實作

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../.." title="mkdocs" class="md-nav__button md-logo" aria-label="mkdocs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    mkdocs
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
    
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_1" >
        
          
          <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="">
            
  
  <span class="md-ellipsis">
    首頁
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            首頁
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    HomePage
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
    
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  <span class="md-ellipsis">
    網頁遊戲引擎原理與實作
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            網頁遊戲引擎原理與實作
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    介紹
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_2" >
        
          
          <label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    環境安裝
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2">
            <span class="md-nav__icon md-icon"></span>
            環境安裝
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../overview/cocos-creator/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Cocos Creator
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../overview/javascript/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    JavaScript
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../overview/git/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Git
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../overview/coding-style/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Code Format
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_3" >
        
          
          <label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    JavaScript & TypeScript
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3">
            <span class="md-nav__icon md-icon"></span>
            JavaScript & TypeScript
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../learn-js/basic-and-syntax/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    基礎型別與語法
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../learn-js/class-and-object/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    類別與物件
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../learn-js/ts-js-compare/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    JS vs TS
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../learn-js/dig-deep/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    進階：型別系統
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../learn-js/strict-mode/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    嚴格模式
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../learn-js/this-and-closure/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    This 與 閉包
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../learn-js/task-schedule/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    事件循環
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../learn-js/promise/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    非同步處理
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../learn-js/generator.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    生成器與協程
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../learn-js/http-request/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    HTTP & RESTful API
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../learn-js/websocket/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Websocket
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_4" >
        
          
          <label class="md-nav__link" for="__nav_2_4" id="__nav_2_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    設計模式
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_4">
            <span class="md-nav__icon md-icon"></span>
            設計模式
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../pattern/singleton/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    單例模式
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../pattern/composition/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    組合模式
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../pattern/observer/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    觀察者模式
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../pattern/object-pool/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    物件池模式
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_5" checked>
        
          
          <label class="md-nav__link" for="__nav_2_5" id="__nav_2_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Cocos Creator
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_5_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2_5">
            <span class="md-nav__icon md-icon"></span>
            Cocos Creator
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../node-and-coord/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Node與坐標系統
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../events/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    事件系統
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../basic/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    元件介紹
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_5_4" >
        
          
          <label class="md-nav__link" for="__nav_2_5_4" id="__nav_2_5_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    常用元件
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_5_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_5_4">
            <span class="md-nav__icon md-icon"></span>
            常用元件
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../common/ui-transform-and-anchor/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    UITransform & Anchor
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../common/layout/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Layout
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../common/ui-opacity/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    UIOpacity
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../common/label-and-richtext/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Label
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../common/sprite/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Sprite
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../common/button/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Button
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../common/editor-box/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    EditorBox
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../common/toggle/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Toggle
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../common/progress-bar/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ProgressBar
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../common/slider/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Slider
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../common/scroll-view/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ScrollView
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../common/page-view/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    PageView
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_5_5" >
        
          
          <label class="md-nav__link" for="__nav_2_5_5" id="__nav_2_5_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    動畫系統
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_5_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_5_5">
            <span class="md-nav__icon md-icon"></span>
            動畫系統
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../animate/tween/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    緩動系統
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../animate/animation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Cocos 動畫系統
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../animate/spine/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Spine 骨骼動畫
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../animate/particle-system/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    粒子系統
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_5_6" >
        
          
          <label class="md-nav__link" for="__nav_2_5_6" id="__nav_2_5_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    音效系統
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_5_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_5_6">
            <span class="md-nav__icon md-icon"></span>
            音效系統
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../sound/autoplay-policy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Autoplay Policy
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../sound/audio-source/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    AudioSource
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_5_7" checked>
        
          
          <label class="md-nav__link" for="__nav_2_5_7" id="__nav_2_5_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    資源管理
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_5_7_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2_5_7">
            <span class="md-nav__icon md-icon"></span>
            資源管理
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../prefab/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    節點池與預製體
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../load-scene/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    場景加載與切換
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../dynamic-load/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    動態載入
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    資源包
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    資源包
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#asset-bundle" class="md-nav__link">
    <span class="md-ellipsis">
      內建的 Asset Bundle
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      配置方法
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      優先級
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      壓縮類型
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#asset-bundle_1" class="md-nav__link">
    <span class="md-ellipsis">
      Asset Bundle 的構建
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Asset Bundle 的構建">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#asset-bundle_2" class="md-nav__link">
    <span class="md-ellipsis">
      Asset Bundle 中的腳本
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#asset-bundle_3" class="md-nav__link">
    <span class="md-ellipsis">
      載入 Asset Bundle
    </span>
  </a>
  
    <nav class="md-nav" aria-label="載入 Asset Bundle">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#asset-bundle_4" class="md-nav__link">
    <span class="md-ellipsis">
      Asset Bundle 的版本
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#asset-bundle_5" class="md-nav__link">
    <span class="md-ellipsis">
      載入 Asset Bundle 中的資源
    </span>
  </a>
  
    <nav class="md-nav" aria-label="載入 Asset Bundle 中的資源">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      批量載入資源
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      載入場景
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#asset-bundle_6" class="md-nav__link">
    <span class="md-ellipsis">
      獲取 Asset Bundle
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      預加載資源
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#asset-bundle_7" class="md-nav__link">
    <span class="md-ellipsis">
      釋放 Asset Bundle 中的資源
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#asset-bundle_8" class="md-nav__link">
    <span class="md-ellipsis">
      移除 Asset Bundle
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#asset-bundle" class="md-nav__link">
    <span class="md-ellipsis">
      內建的 Asset Bundle
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      配置方法
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      優先級
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      壓縮類型
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#asset-bundle_1" class="md-nav__link">
    <span class="md-ellipsis">
      Asset Bundle 的構建
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Asset Bundle 的構建">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#asset-bundle_2" class="md-nav__link">
    <span class="md-ellipsis">
      Asset Bundle 中的腳本
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#asset-bundle_3" class="md-nav__link">
    <span class="md-ellipsis">
      載入 Asset Bundle
    </span>
  </a>
  
    <nav class="md-nav" aria-label="載入 Asset Bundle">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#asset-bundle_4" class="md-nav__link">
    <span class="md-ellipsis">
      Asset Bundle 的版本
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#asset-bundle_5" class="md-nav__link">
    <span class="md-ellipsis">
      載入 Asset Bundle 中的資源
    </span>
  </a>
  
    <nav class="md-nav" aria-label="載入 Asset Bundle 中的資源">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      批量載入資源
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      載入場景
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#asset-bundle_6" class="md-nav__link">
    <span class="md-ellipsis">
      獲取 Asset Bundle
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      預加載資源
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#asset-bundle_7" class="md-nav__link">
    <span class="md-ellipsis">
      釋放 Asset Bundle 中的資源
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#asset-bundle_8" class="md-nav__link">
    <span class="md-ellipsis">
      移除 Asset Bundle
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="bundle"><strong>Bundle</strong></h1>
<p><strong>Asset Bundle</strong> 為資源模組化工具，可讓開發者依照專案需求將貼圖、腳本、場景等資源劃分在多個 <strong>Asset Bundle</strong> 中，然後在遊戲執行過程中，依照需求去載入不同的 <strong>Asset Bundle</strong> ，以減少啟動時需要加載的資源數量，從而減少首次下載和加載遊戲時所需的時間。</p>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p><strong>Asset Bundle</strong> 可以與遊戲本體放置在同一位置，也可以放置於其他遠端伺服器。
官方有特別提到 <code>Web平台</code> 不支援載入遠端的 <strong>Asset Bundle</strong>，實際上是可以的，但需要調整一些專案建置的設定。</p>
</div>
<h2 id="asset-bundle">內建的 Asset Bundle</h2>
<p>專案中除了自訂的 <strong>Asset Bundle</strong> 外，也有內建的 3 個 <strong>Asset Bundle</strong>。 內建 <strong>Asset Bundle</strong> 也可以根據不同平台進行設定。</p>
<figure>
    <a class="glightbox" href="/webgame-engine/assets/bundle/builtin-bundles.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img src="/webgame-engine/assets/bundle/builtin-bundles.png" alt="內建Asset Bundle"/></a>
    <figcaption>內建Asset Bundle<sup id="fnref:note1"><a class="footnote-ref" href="#fn:note1" role="doc-noteref">1</a></sup></figcaption>
</figure>

<table>
<thead>
<tr>
<th>內建 Asset Bundle</th>
<th>功能說明</th>
<th>配置方法</th>
</tr>
</thead>
<tbody>
<tr>
<td>main</td>
<td>存放所有在 <strong>構建發布</strong> 面板的 <strong>參與構建場景</strong> 中勾選的場景以及其依賴資源</td>
<td>透過配置 <strong>構建發布</strong> 面板的 <strong>主包壓縮類型</strong> 和 <strong>配置主包為遠端包</strong> 兩項</td>
</tr>
<tr>
<td>resources</td>
<td>存放 <strong>resources</strong> 目錄下的所有資源以及其依賴資源</td>
<td>透過配置 <strong>資源管理器</strong> 中的 assets\resources 資料夾</td>
</tr>
<tr>
<td>start-scene</td>
<td>如果在 <strong>構建發布</strong> 面板中勾選了 <strong>初始場景分包</strong>，則初始場景將會構建到 <strong>start-scene</strong> 中。</td>
<td>無法進行配置</td>
</tr>
</tbody>
</table>
<p>在構建完成後，內建 <strong>Asset Bundle</strong> 會根據配置決定它所產生的位置，具體的配置方法以及產生規則請參考 <a href="#_1">配置 Asset Bundle</a>。</p>
<p>內建 <strong>Asset Bundle</strong> 是在 <strong>application.js</strong> 中進行載入的，你可以透過自訂構建範本功能修改 <strong>application.js</strong> 中的載入程式碼，如下所示：</p>
<div class="language-TypeScript highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="kd">function</span><span class="w"> </span><span class="nx">loadAssetBundle</span><span class="w"> </span><span class="p">(</span><span class="nx">hasResourcesBundle</span><span class="p">,</span><span class="w"> </span><span class="nx">hasStartSceneBundle</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">mainBundleRoot</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;http://myserver.com/assets/main&#39;</span><span class="p">;</span>
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">resourcesBundleRoot</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;http://myserver.com/assets/resources&#39;</span><span class="p">;</span>
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">bundleRoot</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">hasResourcesBundle</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="p">[</span><span class="nx">resourcesBundleRoot</span><span class="p">,</span><span class="w"> </span><span class="nx">mainBundleRoot</span><span class="p">]</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="nx">mainBundleRoot</span><span class="p">];</span>
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">bundleRoot</span><span class="p">.</span><span class="nx">reduce</span><span class="p">((</span><span class="nx">pre</span><span class="p">,</span><span class="w"> </span><span class="nx">name</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">pre</span><span class="p">.</span><span class="nx">then</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">loadBundle</span><span class="p">(</span><span class="nx">name</span><span class="p">)),</span><span class="w"> </span><span class="nb">Promise</span><span class="p">.</span><span class="nx">resolve</span><span class="p">());</span>
</span><span id="__span-0-6"><a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="p">}</span>
</span><span id="__span-0-7"><a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a>
</span><span id="__span-0-8"><a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="kd">function</span><span class="w"> </span><span class="nx">loadBundle</span><span class="w"> </span><span class="p">(</span><span class="nx">name</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-0-9"><a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nb">Promise</span><span class="p">((</span><span class="nx">resolve</span><span class="p">,</span><span class="w"> </span><span class="nx">reject</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-0-10"><a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a><span class="w">        </span><span class="nx">assetManager</span><span class="p">.</span><span class="nx">loadBundle</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="nx">err</span><span class="p">,</span><span class="w"> </span><span class="nx">bundle</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-0-11"><a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">err</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-0-12"><a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a><span class="w">                </span><span class="k">return</span><span class="w"> </span><span class="nx">reject</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
</span><span id="__span-0-13"><a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a><span class="w">            </span><span class="p">}</span>
</span><span id="__span-0-14"><a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a><span class="w">            </span><span class="nx">resolve</span><span class="p">(</span><span class="nx">bundle</span><span class="p">);</span>
</span><span id="__span-0-15"><a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a><span class="w">        </span><span class="p">});</span>
</span><span id="__span-0-16"><a id="__codelineno-0-16" name="__codelineno-0-16" href="#__codelineno-0-16"></a><span class="w">    </span><span class="p">});</span>
</span><span id="__span-0-17"><a id="__codelineno-0-17" name="__codelineno-0-17" href="#__codelineno-0-17"></a><span class="p">}</span>
</span></code></pre></div>
<h2 id="_1">配置方法</h2>
<p>自訂 <strong>Asset Bundle</strong> 是以 <strong>資料夾</strong> 為單位進行配置的。 當我們在 <strong>資源管理器</strong> 中選取一個資料夾時， <strong>屬性檢查器</strong> 中就會出現一個 <strong>Is Bundle</strong> 的選項，勾選後會出現如下圖的設定項：</p>
<figure>
    <a class="glightbox" href="/webgame-engine/assets/bundle/inspector.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img src="/webgame-engine/assets/bundle/inspector.png" alt="配置選項"/></a>
    <figcaption>配置選項<sup id="fnref:note1"><a class="footnote-ref" href="#fn:note1" role="doc-noteref">1</a></sup></figcaption>
</figure>

<table>
<thead>
<tr>
<th>配置選項</th>
<th>功能說明</th>
</tr>
</thead>
<tbody>
<tr>
<td>Bundle Name</td>
<td><strong>Asset Bundle</strong> 構建後的名稱，預設會使用這個資料夾的名字，可依需求修改。</td>
</tr>
<tr>
<td>Bundle Priority</td>
<td>有 20 個可供配置的優先級，構建時將會依照優先級 <strong>從大到小</strong> 的順序將 <strong>Asset Bundle</strong> 依序構建。 具體內容請參考 <a href="#_2">Asset Bundle 優先級</a>。</td>
</tr>
<tr>
<td>Target Platform</td>
<td>不同平台可使用不同的配置，構建時將根據對應平台的設定來構建 <strong>Asset Bundle</strong>。</td>
</tr>
<tr>
<td>Compression Type</td>
<td>決定 <strong>Asset Bundle</strong> 最後的輸出形式。 具體內容請參考 <a href="#_3">Asset Bundle 壓縮類型</a>。</td>
</tr>
<tr>
<td>Is Remote Bundle</td>
<td>是否將 <strong>Asset Bundle</strong> 配置為遠端包，不支援 Web 平台。<br>若勾選了該項，則 <strong>Asset Bundle</strong> 在構建後會被放到 <strong>remote </strong>資料夾，你需要將整個 <strong>remote</strong> 資料夾放到遠端伺服器上。<br>構建 OPPO、vivo、華為等小遊戲平台時，若勾選了該項，則不會將 <strong>Asset Bundle</strong> 打包到 rpk 中。</td>
</tr>
</tbody>
</table>
<p>配置完成後點選右上方的 <strong>綠色打鉤按鈕</strong> ，這個資料夾就被配置為 <strong>Asset Bundle</strong> 了，然後在 <strong>構建發布</strong> 選擇對應的平台進行構建。</p>
<blockquote>
<p>設定 <strong>Bundle Name</strong> 時請不要使用 <strong>內建 Asset Bundle</strong> 的 resources、main、start-scene 這三個名稱。</p>
</blockquote>
<h2 id="_2">優先級</h2>
<p>當資料夾設定為 <strong>Asset Bundle</strong> 之後，會將資料夾中的資源以及資料夾外的相關依賴資源都合併到同一個 <strong>Asset Bundle</strong> 中。 這樣就有可能出現某個資源雖然不在 <strong>Asset Bundle</strong> 資料夾中，但因為同時被兩個 <strong>Asset Bundle</strong> 所依賴，所以屬於兩個 <strong>Asset Bundle</strong> 的情況，如圖所示：</p>
<figure>
    <a class="glightbox" href="/webgame-engine/assets/bundle/shared.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img src="/webgame-engine/assets/bundle/shared.png" alt="同時依賴某資源"/></a>
    <figcaption>同時依賴某資源<sup id="fnref:note1"><a class="footnote-ref" href="#fn:note1" role="doc-noteref">1</a></sup></figcaption>
</figure>

<p>或是某個資源在一個 <strong>Asset Bundle</strong> 資料夾中，但同時又被其他 <strong>Asset Bundle</strong> 所依賴，如圖所示：</p>
<figure>
    <a class="glightbox" href="/webgame-engine/assets/bundle/shared2.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img src="/webgame-engine/assets/bundle/shared2.png" alt="依賴其他Asset Bundle"/></a>
    <figcaption>依賴其他Asset Bundle<sup id="fnref:note1"><a class="footnote-ref" href="#fn:note1" role="doc-noteref">1</a></sup></figcaption>
</figure>

<p>在這兩種情況下，<strong>Asset c</strong> 既屬於 <strong>Asset Bundle A</strong>，也屬於 <strong>Asset Bundle B</strong>。此時需要透過調整 <strong>Asset Bundle</strong> 的優先級來指定 <strong>Asset c</strong> 要存在於哪一個 <strong>Asset Bundle</strong> 中。</p>
<p>Cocos Creator 有 20 個可供配置的優先級，構建時將會依照優先級 <strong>從大到小</strong> 的順序將 <strong>Asset Bundle</strong> 依序構建。</p>
<ul>
<li>當同一個資源被 <strong>不同優先級</strong> 的多個 <strong>Asset Bundle</strong> 引用時，資源會優先放在優先級高的 <strong>Asset Bundle</strong> 中，此時低優先級的 <strong>Asset Bundle</strong> 會依賴高優先權的 <strong>Asset Bundle</strong>。</li>
</ul>
<p>如果想在低優先級的 <strong>Asset Bundle</strong> 中載入此共享資源，必須在載入低優先級的 <strong>Asset Bundle</strong> <strong>之前</strong> 先載入高優先級的 <strong>Asset Bundle</strong>。</p>
<ul>
<li>當同一個資源被 <strong>相同優先級</strong> 的多個 <strong>Asset Bundle</strong> 引用時，資源會在每個 <strong>Asset Bundle</strong> 中複製一份。 此時不同的 <strong>Asset Bundle</strong> 之間沒有依賴關係，可依任意順序載入。 所以請盡量確保共享的資源(例如 Texture、SpriteFrame、Audio 等)所在的 <strong>Asset Bundle</strong> 優先級更高，以便讓更多低優先級的 Asset Bundle 共享資源，從而最小化包體。</li>
</ul>
<p>3 + 1 個內建 <strong>Asset Bundle</strong> 資料夾的優先級分別為：</p>
<table>
<thead>
<tr>
<th>內建 Asset Bundle</th>
<th>優先級</th>
</tr>
</thead>
<tbody>
<tr>
<td>internal</td>
<td>21</td>
</tr>
<tr>
<td>start-scene</td>
<td>20</td>
</tr>
<tr>
<td>resources</td>
<td>8</td>
</tr>
<tr>
<td>main</td>
<td>7</td>
</tr>
</tbody>
</table>
<p>當內建 <strong>Asset Bundle</strong> 中有相同資源時，資源會優先儲存在優先級高的 <strong>Asset Bundle</strong> 中。 建議其他自訂的 <strong>Asset Bundle</strong> 優先級 <strong>不要高於</strong> 內建的 <strong>Asset Bundle</strong>，以便盡可能共用內建 <strong>Asset Bundle</strong> 中的資源。</p>
<h2 id="_3">壓縮類型</h2>
<p>Cocos Creator 提供了 <strong>None、Merge Depend、Merge All JSON、Zip、Mini Game Subpackage</strong> 這幾種壓縮類型用於優化 <strong>Asset Bundle</strong>。 所有 <strong>Asset Bundle</strong> 預設使用 <strong>Merge Depend</strong> 壓縮類型，開發者可重新設定包含內建 <strong>Asset Bundle</strong> 在內的所有 <strong>Asset Bundle</strong> 的壓縮類型。</p>
<table>
<thead>
<tr>
<th>壓縮類型</th>
<th>功能說明</th>
</tr>
</thead>
<tbody>
<tr>
<td>None</td>
<td>構建 <strong>Asset Bundle</strong> 時沒有任何壓縮操作</td>
</tr>
<tr>
<td>Merge Depend</td>
<td>構建 <strong>Asset Bundle</strong> 時會將相互依賴的資源的 JSON 檔案合併在一起，從而減少執行時的載入請求次數</td>
</tr>
<tr>
<td>Merge All JSON</td>
<td>構建 <strong>Asset Bundle</strong> 時會將所有資源的 JSON 檔案合併為一個，從而最大化減少請求數量，但可能會增加單一資源的載入時間</td>
</tr>
<tr>
<td>Zip</td>
<td>在提供了分包功能的小型遊戲平台，會將 <strong>Asset Bundle</strong> 設定為對應平台上的分包。</td>
</tr>
<tr>
<td>Mini Game Subpackage</td>
<td>在部分小遊戲平台，構建 <strong>Asset Bundle</strong> 時會將資源檔案壓縮成一個 Zip 文件，從而減少運行時的載入請求數量</td>
</tr>
</tbody>
</table>
<p>如果開發者在不同平台對 <strong>Asset Bundle</strong> 設定了不同的壓縮類型，那麼構建時將根據對應平台的設定來構建 <strong>Asset Bundle</strong>。</p>
<h2 id="asset-bundle_1">Asset Bundle 的構建</h2>
<p>在構建時，配置為 <strong>Asset Bundle</strong> 的資料夾中的資源(包含場景、程式碼和其他資源)以及資料夾外的相關依賴資源都會合併到同一個 <strong>Asset Bundle</strong> 資料夾。 例如場景 A 放在 a 資料夾中，當 a 資料夾配置為 <strong>Asset Bundle</strong> 後，場景 A 以及它所依賴的資源都會被合併到 <strong>Asset Bundle a</strong> 資料夾中。</p>
<p>配置為 <strong>Asset Bundle</strong> 的資料夾中的所有 <strong>程式碼</strong> 和 <strong>資源</strong>，會進行以下處理：</p>
<ul>
<li>
<p>程式碼：資料夾中的所有程式碼會根據發布平台合併成一個 <strong>index.js</strong> 或 <strong>game.js</strong> 的入口腳本檔案。</p>
</li>
<li>
<p>資源：資料夾中的所有資源以及資料夾外的相關依賴資源都會放到 <strong>import</strong> 或 <strong>native</strong> 目錄下。</p>
</li>
<li>
<p>資源配置：所有資源的設定資訊包括路徑、類型、版本資訊都會合併成一個 <strong>config.json</strong> 檔案。</p>
</li>
</ul>
<p>構建後產生的 <strong>Asset Bundle</strong> 目錄結構如下圖所示：</p>
<figure>
    <a class="glightbox" href="/webgame-engine/assets/bundle/exported.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img src="/webgame-engine/assets/bundle/exported.png" alt="Asset Bundle 目錄結構"/></a>
    <figcaption>Asset Bundle 目錄結構<sup id="fnref:note1"><a class="footnote-ref" href="#fn:note1" role="doc-noteref">1</a></sup></figcaption>
</figure>

<p>構建完成後，這個 <strong>Asset Bundle</strong> 資料夾會被打包到對應平台目錄下的 <strong>assets</strong> 資料夾中。 但有以下兩種特殊情況：</p>
<ul>
<li>
<p>配置 <strong>Asset Bundle</strong> 時，若勾選了 <strong>Is Remote Bundle</strong>，則這個 <strong>Asset Bundle</strong> 資料夾會被打包到對應平台目錄下的 <strong>remote</strong> 資料夾中。</p>
</li>
<li>
<p>配置 <strong>Asset Bundle</strong> 時，若設定了 <strong>Compression Type</strong> 為 <strong>Mini Game Subpackage</strong>，則這個 <strong>Asset Bundle</strong> 資料夾會被打包到對應平台目錄下的 <strong>subpackages</strong> 資料夾中。</p>
</li>
</ul>
<p><strong>assets</strong>、<strong>remote</strong>、<strong>subpackages</strong> 這三個資料夾中包含的每個資料夾都是一個 <strong>Asset Bundle</strong>。</p>
<h3 id="asset-bundle_2">Asset Bundle 中的腳本</h3>
<p><strong>Asset Bundle</strong> 支援腳本分包。如果開發者的 <strong>Asset Bundle</strong> 中包含腳本文件，則所有腳本都會合併為一個 js 文件。在載入 <strong>Asset Bundle</strong> 時，就會去載入這個 js 檔案。</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>不同 <strong>Asset Bundle</strong> 中的腳本建議最好不要互相引用，否則可能會導致在執行時找不到對應腳本。如果需要引用某些 class 或 variable，可以將該 class 和 variable 暴露在一個你自己的 namespace 中，從而實現共享。</p>
</div>
<h2 id="asset-bundle_3">載入 Asset Bundle</h2>
<p>Cocos Creator 提供了一個統一的 API <code>assetManager.loadBundle</code> 來載入 <strong>Asset Bundle</strong>，載入時需要傳入 <strong>Asset Bundle</strong> 的 <strong>Bundle Name</strong> 或 <strong>Asset Bundle</strong> 的 <strong>url</strong>。 但當你重複使用其他專案的 <strong>Asset Bundle</strong> 時，則只能透過 <strong>url</strong> 進行載入。 使用方法如下：</p>
<div class="language-TypeScript highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="nx">assetManager</span><span class="p">.</span><span class="nx">loadBundle</span><span class="p">(</span><span class="s1">&#39;01_graphics&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="nx">err</span><span class="p">,</span><span class="w"> </span><span class="nx">bundle</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="w">    </span><span class="nx">bundle</span><span class="p">.</span><span class="nx">load</span><span class="p">(</span><span class="s1">&#39;xxx&#39;</span><span class="p">);</span>
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="p">});</span>
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a>
</span><span id="__span-1-5"><a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="c1">// 當重複使用其他專案的 Asset Bundle 時</span>
</span><span id="__span-1-6"><a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a><span class="nx">assetManager</span><span class="p">.</span><span class="nx">loadBundle</span><span class="p">(</span><span class="s1">&#39;https://othergame.com/remote/01_graphics&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="nx">err</span><span class="p">,</span><span class="w"> </span><span class="nx">bundle</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-1-7"><a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a><span class="w">    </span><span class="nx">bundle</span><span class="p">.</span><span class="nx">load</span><span class="p">(</span><span class="s1">&#39;xxx&#39;</span><span class="p">);</span>
</span><span id="__span-1-8"><a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a><span class="p">});</span>
</span></code></pre></div>
<p><code>assetManager.loadBundle</code> 也支援傳入使用者空間中的路徑來載入使用者空間中的 <strong>Asset Bundle</strong>。 透過對應平台提供的下載介面將 <strong>Asset Bundle</strong> 提前下載到用戶空間中，然後再使用 <strong>loadBundle</strong> 進行載入，開發者就可以完全自己管理 <strong>Asset Bundle</strong> 的下載與快取過程。 例如：</p>
<div class="language-TypeScript highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="c1">// 提前下載某個 Asset Bundle 到用戶空間 pathToBundle 目錄下。 需要確保用戶空間下的 Asset Bundle 和對應原始 Asset Bundle 的結構和內容完全一樣</span>
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="c1">// ...</span>
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a>
</span><span id="__span-2-4"><a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="c1">// 透過 Asset Bundle 在使用者空間中的路徑進行載入</span>
</span><span id="__span-2-5"><a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a><span class="c1">// 原生平台</span>
</span><span id="__span-2-6"><a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a><span class="nx">assetManager</span><span class="p">.</span><span class="nx">loadBundle</span><span class="p">(</span><span class="nx">jsb</span><span class="p">.</span><span class="nx">fileUtils</span><span class="p">.</span><span class="nx">getWritablePath</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s1">&#39;/pathToBundle/bundleName&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="nx">err</span><span class="p">,</span><span class="w"> </span><span class="nx">bundle</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-2-7"><a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a><span class="w">    </span><span class="c1">// ...</span>
</span><span id="__span-2-8"><a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a><span class="p">});</span>
</span></code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>在配置 <strong>Asset Bundle</strong> 時，若勾選了 <strong>Is Remote Bundle</strong>，那麼構建時請在 <strong>構建發布</strong> 面板中填入 <strong>資源伺服器位址</strong>。</p>
</div>
<p>透過 <strong>API</strong> 載入 <strong>Asset Bundle</strong> 時，引擎並沒有載入 <strong>Asset Bundle</strong> 中的所有資源，而是載入 <strong>Asset Bundle</strong> 的 <strong>資源清單</strong>，以及包含的 <strong>所有腳本</strong>。</p>
<p>當 <strong>Asset Bundle</strong> 載入完成後，會執行 <code>callback</code> 並將錯誤訊息和 <strong>AssetManager.Bundle</strong> 類別的實例作為 <code>callback</code> 的參數開放出來，這個實例就是 <strong>Asset Bundle API</strong> 的主要入口，開發者可以使用它來載入 <strong>Asset Bundle</strong> 中的各類別資源。</p>
<h3 id="asset-bundle_4">Asset Bundle 的版本</h3>
<p><strong>Asset Bundle</strong> 在更新上延續了 Cocos Creator 的 <strong>MD5</strong> 方案。 當你需要更新遠端伺服器上的 <strong>Asset Bundle</strong> 時，請在 <strong>構建發布</strong> 面板中勾選 <strong>MD5 Cache</strong> 選項，此時構建出來的 <strong>Asset Bundle</strong> 中的 <strong>config.json</strong> 檔案名稱會附帶 <strong>Hash</strong> 值。 如圖所示：</p>
<figure>
    <a class="glightbox" href="/webgame-engine/assets/bundle/bundle_md5.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img src="/webgame-engine/assets/bundle/bundle_md5.png" alt="Asset Bundle 的版本"/></a>
    <figcaption>Asset Bundle 的版本<sup id="fnref:note1"><a class="footnote-ref" href="#fn:note1" role="doc-noteref">1</a></sup></figcaption>
</figure>

<p>在載入 <strong>Asset Bundle</strong> 時 <strong>不需要</strong> 額外提供對應的 <strong>Hash</strong> 值，Cocos Creator 會在 <strong>settings.json</strong> 中查詢對應的 <strong>Hash</strong> 值，並自動做出調整。
但如果你想要將相關版本設定資訊儲存在伺服器上，啟動時動態取得版本資訊以實現熱更新，你也可以手動指定一個版本 <strong>Hash</strong> 值並傳入 <code>loadBundle</code> 中，此時將會以傳入的 <strong>Hash</strong> 值為準：</p>
<div class="language-TypeScript highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="nx">assetManager</span><span class="p">.</span><span class="nx">loadBundle</span><span class="p">(</span><span class="s1">&#39;01_graphics&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="nx">version</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;fbc07&#39;</span><span class="p">},</span><span class="w"> </span><span class="p">(</span><span class="nx">err</span><span class="p">,</span><span class="w"> </span><span class="nx">bundle</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">err</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-3-3"><a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
</span><span id="__span-3-4"><a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-3-5"><a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a><span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;load bundle successfully.&#39;</span><span class="p">);</span>
</span><span id="__span-3-6"><a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a><span class="p">});</span>
</span></code></pre></div>
<p>這樣就能繞過快取中的舊版文件，重新下載最新版本的 <strong>Asset Bundle</strong>。</p>
<h2 id="asset-bundle_5">載入 Asset Bundle 中的資源</h2>
<p>在 <strong>Asset Bundle</strong> 載入完成後，傳回了一個 <strong>AssetManager.Bundle</strong> 類別的實例。 我們可以透過實例上的 <code>load</code> 方法來載入 <strong>Asset Bundle</strong> 中的資源，此方法的參數與 <code>resources.load</code> 相同，只需要傳入資源相對 <strong>Asset Bundle</strong> 的路徑即可。 但要注意的是，路徑的結尾處 <strong>不能</strong> 包含檔案副檔名。</p>
<div class="language-TypeScript highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="c1">// 載入 Prefab</span>
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="nx">bundle</span><span class="p">.</span><span class="nx">load</span><span class="p">(</span><span class="s1">&#39;prefab&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">Prefab</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="nx">err</span><span class="p">,</span><span class="w"> </span><span class="nx">prefab</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a><span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="nx">newNode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">instantiate</span><span class="p">(</span><span class="nx">prefab</span><span class="p">);</span>
</span><span id="__span-4-4"><a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a><span class="w">    </span><span class="nx">director</span><span class="p">.</span><span class="nx">getScene</span><span class="p">().</span><span class="nx">addChild</span><span class="p">(</span><span class="nx">newNode</span><span class="p">);</span>
</span><span id="__span-4-5"><a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a><span class="p">});</span>
</span><span id="__span-4-6"><a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a>
</span><span id="__span-4-7"><a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a><span class="c1">// 載入 Texture</span>
</span><span id="__span-4-8"><a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a><span class="nx">bundle</span><span class="p">.</span><span class="nx">load</span><span class="p">(</span><span class="s1">&#39;image/texture&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">Texture2D</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="nx">err</span><span class="p">,</span><span class="w"> </span><span class="nx">texture</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-4-9"><a id="__codelineno-4-9" name="__codelineno-4-9" href="#__codelineno-4-9"></a><span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">texture</span><span class="p">);</span>
</span><span id="__span-4-10"><a id="__codelineno-4-10" name="__codelineno-4-10" href="#__codelineno-4-10"></a><span class="p">});</span>
</span></code></pre></div>
<p>與 <strong>resources.load</strong> 相同，<code>load</code> 方法也提供了一個類型參數，這在載入同名資源或載入 <strong>SpriteFrame</strong> 時十分有效。</p>
<div class="language-TypeScript highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="c1">// 載入 SpriteFrame</span>
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="nx">bundle</span><span class="p">.</span><span class="nx">load</span><span class="p">(</span><span class="s1">&#39;image/spriteFrame&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">SpriteFrame</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="nx">err</span><span class="p">,</span><span class="w"> </span><span class="nx">spriteFrame</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-5-3"><a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a><span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">spriteFrame</span><span class="p">);</span>
</span><span id="__span-5-4"><a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a><span class="p">});</span>
</span></code></pre></div>
<h3 id="_4">批量載入資源</h3>
<p><strong>Asset Bundle</strong> 提供了 <code>loadDir</code> 方法來批量載入相同目錄下的多個資源。 此方法的參數與 <code>resources.loadDir</code> 相似，只需要傳入該目錄相對 <strong>Asset Bundle</strong> 的路徑即可。</p>
<div class="language-TypeScript highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="c1">// 載入 textures 目錄下的所有資源</span>
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="nx">bundle</span><span class="p">.</span><span class="nx">loadDir</span><span class="p">(</span><span class="s2">&quot;textures&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="nx">err</span><span class="p">,</span><span class="w"> </span><span class="nx">assets</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-6-3"><a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a><span class="w">    </span><span class="c1">// ...</span>
</span><span id="__span-6-4"><a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a><span class="p">});</span>
</span><span id="__span-6-5"><a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a>
</span><span id="__span-6-6"><a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a><span class="c1">// 載入 textures 目錄下的所有 Texture 資源</span>
</span><span id="__span-6-7"><a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a><span class="nx">bundle</span><span class="p">.</span><span class="nx">loadDir</span><span class="p">(</span><span class="s2">&quot;textures&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">Texture2D</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="nx">err</span><span class="p">,</span><span class="w"> </span><span class="nx">assets</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-6-8"><a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a><span class="w">    </span><span class="c1">// ...</span>
</span><span id="__span-6-9"><a id="__codelineno-6-9" name="__codelineno-6-9" href="#__codelineno-6-9"></a><span class="p">});</span>
</span></code></pre></div>
<h3 id="_5">載入場景</h3>
<p><strong>Asset Bundle</strong> 提供了 <code>loadScene</code> 方法用於載入指定 <strong>bundle</strong> 中的場景，你只需要傳入 <strong>場景名稱</strong> 即可。</p>
<p><code>loadScene</code> 與 <code>director.loadScene</code> 不同的地方在於 <code>loadScene</code> 只會載入指定 <strong>bundle</strong> 中的場景，而不會運行場景，你還需要使用 <code>director.runScene</code> 來運行場景。</p>
<div class="language-TypeScript highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="nx">bundle</span><span class="p">.</span><span class="nx">loadScene</span><span class="p">(</span><span class="s1">&#39;test&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="nx">err</span><span class="p">,</span><span class="w"> </span><span class="nx">scene</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a><span class="w">    </span><span class="nx">director</span><span class="p">.</span><span class="nx">runScene</span><span class="p">(</span><span class="nx">scene</span><span class="p">);</span>
</span><span id="__span-7-3"><a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a><span class="p">});</span>
</span></code></pre></div>
<h2 id="asset-bundle_6">獲取 Asset Bundle</h2>
<p>當 <strong>Asset Bundle</strong> 載入過之後，就會被快取下來，此時開發者可以使用 <strong>Asset Bundle</strong> 名稱來取得該 <strong>bundle</strong>。 例如：</p>
<div class="language-TypeScript highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="kd">const</span><span class="w"> </span><span class="nx">bundle</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">assetManager</span><span class="p">.</span><span class="nx">getBundle</span><span class="p">(</span><span class="s1">&#39;01_graphics&#39;</span><span class="p">);</span>
</span></code></pre></div>
<h2 id="_6">預加載資源</h2>
<p>除了場景，其他資源也可以預先載入。預先載入的載入參數和正常載入時一樣，不過因為預先載入只會去下載必要的資源，並不會進行資源的反序列化和初始化工作，所以效能消耗更小，更適合在遊戲過程中使用。</p>
<p><strong>Asset Bundle</strong> 中提供了 <code>preload</code> 和 <code>preloadDir</code> 介面用於預先載入 <strong>Asset Bundle</strong> 中的資源。具體的使用方式和 <strong>assetManager</strong> 一致，詳情可參考文件 <a href="https://docs.cocos.com/creator/3.6/manual/en/asset/preload-load.html">預先載入與載入</a>。</p>
<h2 id="asset-bundle_7">釋放 Asset Bundle 中的資源</h2>
<p>在資源載入完成後，所有的資源都會暫時被快取到 <code>assetManager</code> 中，以避免重複載入。快取中的資源會佔用內存，如果有些資源不再需要用到，可以透過以下三種方式釋放：</p>
<ol>
<li>使用常規的 <code>assetManager.releaseAsset</code> 方法進行釋放。</li>
</ol>
<div class="language-TypeScript highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="nx">bundle</span><span class="p">.</span><span class="nx">load</span><span class="p">(</span><span class="s1">&#39;image/spriteFrame&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">SpriteFrame</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="nx">err</span><span class="p">,</span><span class="w"> </span><span class="nx">spriteFrame</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-9-2"><a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a><span class="w">    </span><span class="nx">assetManager</span><span class="p">.</span><span class="nx">releaseAsset</span><span class="p">(</span><span class="nx">spriteFrame</span><span class="p">);</span>
</span><span id="__span-9-3"><a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a><span class="p">});</span>
</span></code></pre></div>
<ol>
<li>使用 <strong>Asset Bundle</strong> 提供的 <code>release</code> 方法，透過傳入路徑和類型進行釋放，只能釋放在 <strong>Asset Bundle</strong> 中的單一資源。參數可以與 <strong>Asset Bundle</strong> 的 <code>load</code> 方法中所使用的參數一致。</li>
</ol>
<div class="language-TypeScript highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="nx">bundle</span><span class="p">.</span><span class="nx">load</span><span class="p">(</span><span class="s1">&#39;image/spriteFrame&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">SpriteFrame</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="nx">err</span><span class="p">,</span><span class="w"> </span><span class="nx">spriteFrame</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-10-2"><a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a><span class="w">    </span><span class="nx">bundle</span><span class="p">.</span><span class="nx">release</span><span class="p">(</span><span class="s1">&#39;image&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">SpriteFrame</span><span class="p">);</span>
</span><span id="__span-10-3"><a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a><span class="p">});</span>
</span></code></pre></div>
<ol>
<li>使用 <strong>Asset Bundle</strong> 提供的 <code>releaseAll</code> 方法，此方法與 <code>assetManager.releaseAll</code> 相似，<code>releaseAll</code> 方法會釋放所有屬於該 <strong>bundle</strong> 的資源(包括在 <strong>Asset Bundle</strong> 中的資源以及其外部的相關依賴資源)，請慎重使用。</li>
</ol>
<div class="language-TypeScript highlight"><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="nx">bundle</span><span class="p">.</span><span class="nx">load</span><span class="p">(</span><span class="s1">&#39;image/spriteFrame&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">SpriteFrame</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="nx">err</span><span class="p">,</span><span class="w"> </span><span class="nx">spriteFrame</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-11-2"><a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a><span class="w">    </span><span class="nx">bundle</span><span class="p">.</span><span class="nx">releaseAll</span><span class="p">();</span>
</span><span id="__span-11-3"><a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a><span class="p">});</span>
</span></code></pre></div>
<blockquote>
<p>在釋放資源時，Cocos Creator 會自動處理該資源的依賴資源，開發者不需要對其依賴資源進行管理。</p>
</blockquote>
<h2 id="asset-bundle_8">移除 Asset Bundle</h2>
<p>在載入了 <strong>Asset Bundle</strong> 之後，此 <strong>bundle</strong> 在整個遊戲過程中會一直保存，除非開發者手動移除。當手動移除了某個不需要的 <strong>bundle</strong>，那麼此 <strong>bundle</strong> 的快取也會被移除，如果需要再次使用，則必須再重新載入一次。</p>
<div class="language-TypeScript highlight"><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="kd">let</span><span class="w"> </span><span class="nx">bundle</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">assetManager</span><span class="p">.</span><span class="nx">getBundle</span><span class="p">(</span><span class="s1">&#39;bundle1&#39;</span><span class="p">);</span>
</span><span id="__span-12-2"><a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a><span class="nx">assetManager</span><span class="p">.</span><span class="nx">removeBundle</span><span class="p">(</span><span class="nx">bundle</span><span class="p">);</span>
</span></code></pre></div>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>在移除 <strong>Asset Bundle</strong> 時，並不會釋放該 <strong>bundle</strong> 中已載入過的資源。 如果需要釋放，請先使用 <strong>Asset Bundle</strong> 的 <strong>release / releaseAll</strong> 方法：</p>
<div class="language-TypeScript highlight"><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="kd">let</span><span class="w"> </span><span class="nx">bundle</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">assetManager</span><span class="p">.</span><span class="nx">getBundle</span><span class="p">(</span><span class="s1">&#39;bundle1&#39;</span><span class="p">);</span>
</span><span id="__span-13-2"><a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a><span class="c1">// 釋放在 Asset Bundle 中的單一資源</span>
</span><span id="__span-13-3"><a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a><span class="nx">bundle</span><span class="p">.</span><span class="nx">release</span><span class="p">(</span><span class="sb">`image`</span><span class="p">,</span><span class="w"> </span><span class="nx">SpriteFrame</span><span class="p">);</span>
</span><span id="__span-13-4"><a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a><span class="nx">assetManager</span><span class="p">.</span><span class="nx">removeBundle</span><span class="p">(</span><span class="nx">bundle</span><span class="p">);</span>
</span></code></pre></div>
<div class="language-TypeScript highlight"><pre><span></span><code><span id="__span-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="kd">let</span><span class="w"> </span><span class="nx">bundle</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">assetManager</span><span class="p">.</span><span class="nx">getBundle</span><span class="p">(</span><span class="s1">&#39;bundle1&#39;</span><span class="p">);</span>
</span><span id="__span-14-2"><a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a><span class="c1">// 釋放所有屬於 Asset Bundle 的資源</span>
</span><span id="__span-14-3"><a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a><span class="nx">bundle</span><span class="p">.</span><span class="nx">releaseAll</span><span class="p">();</span>
</span><span id="__span-14-4"><a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a><span class="nx">assetManager</span><span class="p">.</span><span class="nx">removeBundle</span><span class="p">(</span><span class="nx">bundle</span><span class="p">);</span>
</span></code></pre></div>
</div>
<div class="footnote">
<hr />
<ol>
<li id="fn:note1">
<p><a href="https://docs.cocos.com/creator/3.6/manual/en/asset/bundle.html">Cocos Creator 3.6 Manual - Asset Bundle</a>&#160;<a class="footnote-backref" href="#fnref:note1" title="Jump back to footnote 1 in the text">&#8617;</a></p>
</li>
</ol>
</div>





                
              </article>
            </div>
          
          
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../../../..", "features": ["navigation.tabs", "navigation.tabs.instant", "navigation.top", "navigation.expand", "navigation.tabs.sticky", "content.code.annotate", "content.code.copy", "content.code.select", "content.footnote.tooltips", "search.highlight", "search.share", "search.suggest"], "search": "../../../../assets/javascripts/workers/search.f886a092.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../../../assets/javascripts/bundle.6c14ae12.min.js"></script>
      
        <script src="../../../../javascripts/highlight.min.js"></script>
      
        <script src="../../../../javascripts/cpp.min.js"></script>
      
        <script src="../../../../javascripts/bash.min.js"></script>
      
        <script src="../../../../javascripts/diff.min.js"></script>
      
        <script src="../../../../javascripts/markdown.min.js"></script>
      
        <script src="../../../../javascripts/llvm.min.js"></script>
      
        <script src="../../../../javascripts/http.min.js"></script>
      
        <script src="../../../../javascripts/javascript.min.js"></script>
      
        <script src="../../../../javascripts/typescript.min.js"></script>
      
        <script src="../../../../javascripts/loader.js"></script>
      
    
  <script>document$.subscribe(() => {const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});})</script></body>
</html>